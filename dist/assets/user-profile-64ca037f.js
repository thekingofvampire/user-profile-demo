import{d as U,e as E,f as q,g as N,h as b,i as y,j as $,r as m,o as s,c as _,a as g,n as z,b as l,w as a,k as v,t as h,l as f,u as L,m as V,p as J}from"./index-99f7370d.js";var O={exports:{}};(function(S,n){(function(i,d){S.exports=d(U)})(E,function(i){function d(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var k=d(i),x={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(o,e){return e==="W"?o+"周":o+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(o,e){var t=100*o+e;return t<600?"凌晨":t<900?"早上":t<1100?"上午":t<1300?"中午":t<1800?"下午":"晚上"}};return k.default.locale(x,null,!0),x})})(O);const W={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"},G=W,Q={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]},R=Q,P={lang:q({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},G),timePickerLocale:q({},R)};P.lang.ok="确定";const K=P;class X{constructor(){}getStorage(n){if(!n){console.error(new Error("function getStorage params is undefined"));return}const i=window.localStorage.getItem(n);try{return JSON.parse(i)}catch{return i}}setStorage(n,i){if(!n&&!i){console.error(new Error("function setStorage params is undefined"));return}if(typeof i=="object"){const d=JSON.stringify(i);window.localStorage.setItem(n,d)}else window.localStorage.setItem(n,i)}removeStorage(n){if(!n){console.error(new Error("function removeStorage params is undefined"));return}window.localStorage.removeItem(n)}clearStorage(){window.localStorage.clear()}}const w=new X,Z={class:"user-profile-container"},ee={class:"relative"},te=["src"],ae=["src"],oe={class:"px-4 xl:px-0 max-w-[1024px] mx-auto"},le=g("div",{class:"py-10 text-sm xl:text-base font-bold xl:text-center"},"用户信息",-1),re={class:"user-info"},se={key:1,class:"info-detail px-1"},ne={key:1,class:"info-detail px-1"},ie={key:1,class:"info-detail px-1"},ce={key:1,class:"info-detail px-1"},de={key:1,class:"info-detail px-1"},ue={key:1,class:"info-detail px-1"},me={key:0,class:"button-wrap pb-20 flex items-center justify-center"},fe=N({__name:"user-profile",setup(S){const n=b(w.getStorage("avatarbg")),i=b(w.getStorage("avatar")),d=b(),k={span:6},x={span:12};let o=w.getStorage("userInfoForm");o&&(o.birth=y(o.birth));const e=$(o?{...o}:{name:"我是昵称",sex:"male",birth:y("1999-10-28"),emailBefore:"999888111",emailAfter:"@qq.com",email:"",mobile:18899887766,desc:"我是一只小小小鸟"});e.email=e.emailBefore+e.emailAfter,b(!1);const t=b(!1),j=()=>{t.value||(t.value=!t.value)};window.onbeforeunload=function(){if(t.value)return"您有未保存的信息，确定离开当前页面吗？"};const B={name:[{required:!0,message:"请输入您的昵称",trigger:"change"},{min:3,max:10,message:"昵称不能超过10个字哦",trigger:"blur"}],sex:[{required:!0,message:"请选择您的性别",trigger:"change"}],birth:[{required:!0,message:"请选择您的生日",trigger:"change"}],email:[{required:!0,message:"请输入您的邮箱",trigger:"change"},{pattern:/\w+([-+.]\w+)*/,message:"请输入正确的邮箱",trigger:"change"}],mobile:[{required:!0,message:"请输入正确的手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},I=()=>{d.value.validate().then(()=>{const u={...J(e)};u.birth=y(u.birth).format("YYYY-MM-DD"),u.email=u.emailBefore+u.emailAfter,w.setStorage("userInfoForm",u),t.value=!1}).catch(u=>{console.log("error",u)})},F=()=>{d.value.resetFields()};return(u,r)=>{const M=m("a-input"),p=m("a-form-item"),Y=m("a-select-option"),D=m("a-select"),H=m("a-date-picker"),A=m("a-textarea"),T=m("a-form"),C=m("a-button");return s(),_("div",Z,[g("div",{class:"avatar-bg h-[300px] flex items-center justify-center",style:z(`background-image: url(${n.value?n.value:"/src/assets/images/defaultbg.png"})`)},[g("div",ee,[g("img",{class:"w-[150px] rounded-full",src:i.value?i.value:"/src/assets/images/default.png",alt:""},null,8,te),g("img",{class:"absolute bottom-0 right-0 w-8 h-8 cursor-pointer",onClick:j,src:t.value?"/src/assets/images/quitedit.png":"/src/assets/images/edit.png",alt:""},null,8,ae)])],4),g("div",oe,[le,g("div",re,[l(T,{ref_key:"userForm",ref:d,class:"pb-8",model:e,rules:B,"label-col":k,"wrapper-col":x},{default:a(()=>[l(p,{ref:"name",label:"昵称",name:"name"},{default:a(()=>[t.value?(s(),v(M,{key:0,value:e.name,"onUpdate:value":r[0]||(r[0]=c=>e.name=c)},null,8,["value"])):(s(),_("div",se,h(e.name),1))]),_:1},512),l(p,{label:"性别",name:"sex"},{default:a(()=>[t.value?(s(),v(D,{key:0,value:e.sex,"onUpdate:value":r[1]||(r[1]=c=>e.sex=c),placeholder:"请选择您的性别"},{default:a(()=>[l(Y,{value:"male"},{default:a(()=>[f("男")]),_:1}),l(Y,{value:"female"},{default:a(()=>[f("女")]),_:1})]),_:1},8,["value"])):(s(),_("div",ne,h(e.sex=="male"?"男":"女"),1))]),_:1}),l(p,{label:"出生日期",required:"",name:"birth"},{default:a(()=>[t.value?(s(),v(H,{key:0,value:e.birth,"onUpdate:value":r[2]||(r[2]=c=>e.birth=c),type:"date",placeholder:"选择出生日期",style:{width:"100%"},locale:L(K)},null,8,["value","locale"])):(s(),_("div",ie,h(L(y)(e.birth).format("YYYY-MM-DD")),1))]),_:1}),l(p,{ref:"mobile",label:"手机号",name:"mobile"},{default:a(()=>[t.value?(s(),v(M,{key:0,value:e.mobile,"onUpdate:value":r[3]||(r[3]=c=>e.mobile=c)},null,8,["value"])):(s(),_("div",ce,h(e.mobile),1))]),_:1},512),l(p,{label:"邮箱",required:"",name:"emailBefore"},{default:a(()=>[t.value?(s(),v(M,{key:0,placeholder:"请输入您的邮箱",value:e.emailBefore,"onUpdate:value":r[5]||(r[5]=c=>e.emailBefore=c)},{addonAfter:a(()=>[l(D,{value:e.emailAfter,"onUpdate:value":r[4]||(r[4]=c=>e.emailAfter=c),style:{width:"160px"}},{default:a(()=>[l(Y,{value:"@qq.com"},{default:a(()=>[f("@qq.com")]),_:1}),l(Y,{value:"@google.com"},{default:a(()=>[f("@google.com")]),_:1}),l(Y,{value:"@outlook.com"},{default:a(()=>[f("@outlook.com")]),_:1})]),_:1},8,["value"])]),_:1},8,["value"])):(s(),_("div",de,h(e.email),1))]),_:1}),l(p,{label:"个人简介",name:"desc"},{default:a(()=>[t.value?(s(),v(A,{key:0,value:e.desc,"onUpdate:value":r[6]||(r[6]=c=>e.desc=c)},null,8,["value"])):(s(),_("div",ue,h(e.desc),1))]),_:1})]),_:1},8,["model"]),t.value?(s(),_("div",me,[l(C,{type:"primary",onClick:I},{default:a(()=>[f("提交")]),_:1}),l(C,{class:"ml-4",onClick:F},{default:a(()=>[f("取消")]),_:1})])):V("",!0)])])])}}});export{fe as default};
